<!DOCTYPE html>
<html>
<head><meta charset="utf-8"></head>
  <body>
    <!-- Begin jQuery -->
    <script src="//code.jquery.com/jquery-2.1.4.min.js"></script>
    <!-- Timezone offset Retrieval jQuery -->
    <script>
      var timezone_offset_minutes = new Date().getTimezoneOffset();
      timezone_offset_minutes = timezone_offset_minutes == 0 ? 0 : -timezone_offset_minutes;

      console.log( "TZ offset in minutes: " + timezone_offset_minutes); // logging the timezone offset in min

      function fetchdata(){
      $.ajax({
      type: 'post',
      data: {name: timezone_offset_minutes},
      success: function(data){
        // Perform operation on the return value
        $('#timelyGreeting').text(data)
       }
     });
    }

    $(document).ready(function(){
     fetchdata(); // executing fetchdata() first so the greeting displays when the page loads
     setInterval(fetchdata, 1000); // interval set to 1 second. updates the greeting live on the page without reloading
    });
    </script>
  </body>
</html>

